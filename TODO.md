# TODO

Технический долг и roadmap для Todo API (.NET 9, Minimal API, EF Core InMemory).

## Архитектура и качество кода

- [ ] Вынести доменные/инфраструктурные/аппликационные проекты в отдельные сборки (сейчас допускается структура в одном проекте для простоты).
- [ ] Ввести явный слой Application Contracts (интерфейсы сервисов и DTO) с отдельным namespace, чтобы упростить переиспользование в других клиентах.
- [ ] Включить анализаторы (Roslyn / .editorconfig) и StyleCop/Analzyers для единообразного стиля кода.
- [ ] Добавить SonarQube или аналогичный анализатор для контроля качества и накопления метрик по техдолгу.

## Домен и бизнес-логика

- [ ] Вынести логику изменения статуса задачи (`IsCompleted`, `CompletedAt`) в методы доменной модели (например, `MarkCompleted()`, `MarkIncomplete()`), чтобы уменьшить дублирование и защитить инварианты.
- [ ] Добавить уникальность `Title` в рамках пользователя (потребуется сущность User и multi-tenancy‑поддержка).
- [ ] Добавить soft delete (флаг `IsDeleted` вместо физического удаления) и фильтрацию по нему.
- [ ] Добавить сортировку по нескольким полям в списке задач (CreatedAt, Priority, Title, IsCompleted) с параметрами `sortBy`, `sortDirection`.

## Безопасность и авторизация

- [ ] Добавить аутентификацию (JWT Bearer) и авторизацию для всех эндпоинтов `/api/todos` [web:28][web:31].
- [ ] Привязать задачи к пользователю (поле `OwnerId`, извлекаемое из токена), чтобы каждый пользователь видел только свои задачи.
- [ ] Добавить базовую защиту от brute force / flood запросов (rate limiting на уровне пользователя/токена, а не только IP).
- [ ] Настроить строгую политику CORS в случае вынесения API в публичный доступ (ограничить домены и методы).

## Ошибки, устойчивость и логирование

- [ ] Расширить глобальный Exception Handling, добавив типизацию бизнес-ошибок (например, `DomainException`, `ValidationException`) с маппингом в конкретные HTTP‑коды.
- [ ] Ввести корреляционные ID (например, `X-Correlation-Id`) и логировать его во всех запросах/ошибках.
- [ ] Добавить структурированное логирование (Serilog + sink в консоль/файл) и минимальные дашборды в будущей observability‑системе.
- [ ] Добавить health‑checks (`/health`) и readiness/liveness‑пробы для контейнерного деплоя.

## Производительность и масштабирование

- [ ] Заменить InMemory‑провайдера EF Core на реальную БД (PostgreSQL/SQL Server), добавить миграции.
- [ ] Настроить connection pooling и кэширование неизменяемых данных (справочники, если появятся).
- [ ] Ввести лимиты на размер тела запросов (`MaxRequestBodySize`) и максимальное количество одновременных запросов.
- [ ] Добавить базовый кэш для тяжелых GET‑операций (например, список с фильтрами) с коротким временем жизни.

## API‑дизайн и удобство клиентов

- [ ] Добавить версионирование API (`/api/v1/todos`) и стратегию обкатки breaking changes [web:64].
- [ ] Добавить поддержку ETag/If-None-Match для GET‑эндпоинтов, чтобы оптимизировать кэширование на клиенте.
- [ ] Расширить Swagger‑описание: примеры запросов/ответов, описания параметров, коды ошибок с примерами ProblemDetails.
- [ ] Добавить HATEOAS‑ссылки (self, update, delete, complete) в ответы, если будет потребность в навигации со стороны клиентов.

## Тестирование и CI/CD

- [ ] Увеличить покрытие unit‑тестами: негативные сценарии, фильтрация, пагинация, edge‑cases по датам.
- [ ] Добавить интеграционные тесты для всех публичных эндпоинтов (успешные и ошибочные сценарии).
- [ ] Настроить pipeline CI (GitHub Actions/Azure DevOps): прогон тестов, линтеров и сборка контейнера.
- [ ] Добавить smoke‑тесты после деплоя (запуск нескольких базовых запросов к API).

## Документация и поддержка

- [ ] Расширить README: разделы "Security", "Deployment", "Monitoring" с базовыми рекомендациями 
- [ ] Добавить CHANGELOG.md для фиксации изменений по версиям.
- [ ] Описать стандарт код-ревью для проекта (что проверяем: архитектура, безопасность, перфоманс, тесты).
- [ ] Добавить пример клиента (например, консольный .NET или небольшой фронтенд), использующего API.

# BACKLOG

- [ ] Миграция на распределенный кэш (Redis) при переходе на реальную БД.
- [ ] Поддержка мульти‑тенантности (несколько организаций, отдельные namespace задач для каждой).
- [ ] Экспорт/импорт задач (например, в CSV/JSON) с контролем безопасности.
- [ ] Webhook‑уведомления при изменении задач (создание, завершение, удаление).

# DONE

- [x] Реализован REST API для Todo с CRUD‑операциями.
- [x] Добавлена поддержка фильтрации и пагинации для списка задач.
- [x] Внедрен единый формат ошибок (ProblemDetails, ValidationProblemDetails) для API
- [x] Реализован глобальный middleware обработки исключений с логированием.
- [x] Добавлены unit‑тесты для бизнес‑логики и интеграционные тесты для API.
